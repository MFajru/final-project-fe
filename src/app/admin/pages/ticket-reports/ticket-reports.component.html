<div>
  <app-page-header text="Laporan Tiket">
    <app-input-field
      inputType="text"
      inputName="search"
      inputId="search"
      placeholder="Search By ID"
      errText=""
      inputVariants="iconsRight"
      inputSize="small"
      [fGroup]="form"
      fcName="search"
    />
  </app-page-header>
  <div class="w-fit mt-6">
    <app-dropdown
      placeholder="Filter By Category"
      [dropdownItems]="dropdownItems"
    />
  </div>
  <div class="mt-4">
    <app-table customClass="lg:w-full">
      <thead>
        <tr class="bg-[#F7F7F7] h-[64px] text-center">
          <td></td>
          @for (tHead of tHeads; track $index) { @if (tHead.isAbleToSort) {
          <td (click)="onClick()" class="cursor-pointer">
            <div class="flex items-center justify-start gap-1">
              <p class="text-sm">{{ tHead.title }}</p>
              <lucide-icon
                name="chevron-down"
                size="12"
                [strokeWidth]="2.5"
              ></lucide-icon>
            </div>
          </td>
          } @else {
          <td class="text-sm">
            <div class="flex justify-start">
              <p>{{ tHead.title }}</p>
            </div>
          </td>
          } }
        </tr>
      </thead>
      <tbody>
        @for (data of ticketReportsData; ; let idx = $index; track data.id) {
        <tr>
          <th>{{ idx + 1 }}</th>
          <td>{{ data.ticket_number }}</td>
          <td>{{ data.created_at | formatDate : "DD-MM-YYYY" }}</td>
          <td>{{ data.category | toTitleCase }}</td>
          <td>
            <app-ratings [rating]="data.rating" size="small" />
          </td>
          <td>{{ data.time_response }}</td>
          <td>
            <app-label-status [status]="data.status" />
          </td>
          <td>
            <div class="flex justify-center items-center gap-[16px]">
              @if (data.status.toLowerCase() === "diajukan") {
              <button
                class="hover:text-orangeStatus"
                (click)="onHandleUpdateStatus(data.id)"
              >
                <lucide-icon
                  name="hourglass"
                  size="16"
                  [strokeWidth]="2.5"
                ></lucide-icon>
              </button>
              } @else if (data.status.toLowerCase() === "dalam proses") {
              <button
                class="hover:text-greenStatus"
                (click)="onHandleUpdateStatus(data.id)"
              >
                <lucide-icon
                  name="square-check"
                  size="16"
                  [strokeWidth]="2.5"
                ></lucide-icon>
              </button>
              }
              <button>
                <lucide-icon
                  name="ellipsis"
                  [strokeWidth]="2.5"
                  size="16"
                ></lucide-icon>
              </button>
            </div>
          </td>
        </tr>
        }
      </tbody>
    </app-table>
  </div>
</div>
